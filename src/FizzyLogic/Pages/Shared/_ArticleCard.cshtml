@model Article
@{
    var article = Model;
}
@functions{
    string TileImage(string source)
    {
        var name = System.IO.Path.GetFileNameWithoutExtension(source);
        var extension = System.IO.Path.GetExtension(source);
        var path = source[..source.LastIndexOf("/")];

        return $"{path}/{name}-w966{extension}";
    }
}
<div class="col article-card-container">
    <div class="card article-card h-100 border-light shadow-sm">
        @if(!string.IsNullOrEmpty(Model.FeaturedImage))
        {
            <div class="card-img-top" style="height: 250px; background-image: @TileImage(Model.FeaturedImage); background-size: cover; background-position: center">

            </div>
            <article class="card-body">
                <header>
                    <permalink article="article" class="card-link">
                        <h2 class="h5 card-title">@Model.Title</h2>
                    </permalink>
                </header>
                <main>
                    <div class="small text-muted mb-2">
                        Created @Model.DatePublished<br/>
                        Filed in <a asp-page="/Category" asp-route-slug="@Model.Category.Slug">@Model.Category.Title</a>
                    </div>
                    <p class="card-text">@Model.Excerpt</p>
                    <permalink article="article" class="card-link">Read more</permalink>
                </main>
            </article>
        }
        else
        {
            <article class="card-body">
                <header>
                    <permalink article="article" class="card-link">
                        <h2 class="h2 card-title">@Model.Title</h2>
                    </permalink>
                </header>
                <main>
                    <p class="small text-muted mb-2">
                        Created @Model.DatePublished<br/>
                        Filed in <a asp-page="/Category" asp-route-slug="@Model.Category.Slug">@Model.Category.Title</a>
                    </p>
                    <p class="card-text">@Model.Excerpt</p>
                    <permalink article="article" class="card-link">Read more</permalink>
                </main>
                <footer>
                    
                </footer>
            </article>
        }
    </div>
</div>  